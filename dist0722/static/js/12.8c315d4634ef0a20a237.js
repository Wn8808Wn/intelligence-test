webpackJsonp([12],{"1m9T":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("pPmT"),n={inject:["reload"],data:function(){return{RoomCode:"",currentPage:null,pageSize:10,totalPage:null,total:null,isDisable:!1,tableData:[],unitsList:[]}},methods:{getData:function(t,a){var e=this;this.tableData=[],this.$http.get(t,a).then(function(t){console.log(t,"212313"),e.total=t.data.data.roomPage.total,e.totalPage=t.data.data.roomPage.totalPage,e.pageSize=t.data.data.roomPage.pageSize,e.currentPage=t.data.data.roomPage.page;var a=t.data.data.roomPage.rows;e.tableData=a,e.unitsList=t.data.data.unitsList,e.tableData.forEach(function(t,a){t.buildDate=e.getDateStyle(t.buildDate),"北京市"===t.province?t.addressabbr=t.province+t.distric:"天津市"===t.province?t.addressabbr=t.province+t.distric:"上海市"===t.province?t.addressabbr=t.province+t.distric:"重庆市"===t.province?t.addressabbr=t.province+t.distric:t.addressabbr=t.province+t.city+t.distric,t.manageUnit=e.unitsList.filter(function(a){return a.id===t.manageUnit})[0].unitName})}).catch(function(t){console.log(t)})},freezedRoom:function(){this.$router.push({name:"frozenRoom"})},handleCurrentChange:Object(o.a)(function(t){var a=new URLSearchParams;this.RoomCode?a.append("examRoomCode",this.RoomCode):a.append("examRoomCode",""),a.append("dataStatus",0),a.append("userId",1),a.append("page",t),this.getData("/api/room/room_list",{params:a})},300),handleAddRoom:function(){this.$router.push({name:"addRoom"})},freezeData:function(t){var a=this;this.$confirm("考场冻结后，将不能对该考场新增考试计划，但不影响已编排计划。","考场冻结",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var e=new URLSearchParams;e.append("id",t),e.append("dataStatus",1),a.$http.post("/api/room/update_status",e),a.$message({type:"success",message:"冻结成功!"}),a.reload()}).catch(function(){a.$message({type:"warning",message:"已取消冻结"})})},searchData:function(){var t=new URLSearchParams;t.append("examRoomCode",this.RoomCode),t.append("dataStatus",0),t.append("userId",1),this.getData("/api/room/room_list",{params:t})},handldetails:function(t){this.$router.push({name:"examRoomDetail",query:{id:t}})}},mounted:function(){var t=new URLSearchParams;t.append("userId",1),t.append("dataStatus",0),this.getData("/api/room/room_list",{params:t})}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"examRoomList"},[e("div",{staticClass:"top common"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus",round:""},on:{click:t.handleAddRoom}},[t._v("新增考场")]),t._v(" "),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.RoomCode,expression:"RoomCode",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入考场编号"},domProps:{value:t.RoomCode},on:{input:function(a){a.target.composing||(t.RoomCode=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),t._v(" "),e("el-button",{attrs:{circle:""},on:{click:t.searchData}},[t._v("搜索")])],1),t._v(" "),e("el-button",{attrs:{type:"primary",round:""},on:{click:t.freezedRoom}},[t._v("已冻结考场")]),t._v(" "),e("p",[t._v("共有"),e("span",[t._v(t._s(t.total))]),t._v("/"),e("span",[t._v(t._s(t.total))]),t._v("条结果")])],1),t._v(" "),e("div",{staticClass:"tabs-data"},[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData}},[e("el-table-column",{attrs:{prop:"province",label:"省份",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"manageUnit",label:"管理单位",width:"226"}}),t._v(" "),e("el-table-column",{attrs:{prop:"examRoomCode",label:"考场编号",width:"140"}}),t._v(" "),e("el-table-column",{attrs:{label:"座位数",width:"104"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.row.seatSize+"个"))]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"addressabbr",label:"地址",width:"300"}}),t._v(" "),e("el-table-column",{attrs:{prop:"buildDate",label:"设立时间",width:"158"}}),t._v(" "),e("el-table-column",{attrs:{prop:"createdUser",label:"添加人",width:"125"}}),t._v(" "),e("el-table-column",{attrs:{label:"管理操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",icon:"iconfont icon-dongjie",disabled:t.isDisable},on:{click:function(e){return e.preventDefault(),t.freezeData(a.row.id)}}},[t._v("冻结")]),t._v(" "),e("el-button",{attrs:{type:"text",icon:"iconfont icon-xiangqing"},on:{click:function(e){return e.preventDefault(),t.handldetails(a.row.id)}}},[t._v("详情")])]}}])})],1),t._v(" "),e("el-pagination",{attrs:{background:"",total:t.total,layout:"prev, pager, next","current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var i={components:{examRoomListComponent:e("C7Lr")(n,r,!1,function(t){e("fo3R")},null,null).exports},data:function(){return{}}},s={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"exammanage"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-kaochangguanli-"}),this._v("考场管理")]),this._v(" "),a("examRoomListComponent")],1)],1)],1)},staticRenderFns:[]};var l=e("C7Lr")(i,s,!1,function(t){e("IjMC")},"data-v-26bb4e38",null);a.default=l.exports},IjMC:function(t,a){},fo3R:function(t,a){}});
//# sourceMappingURL=12.8c315d4634ef0a20a237.js.map