webpackJsonp([8],{"Im/A":function(e,a){},R3bI:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("pdl+"),i=t("2CUI"),r={data:function(){return{}},components:{plansListComponent:n.a,limiteRegistrationSet:i.a},methods:{handelGo:function(e){console.log(e.index),0==e.index&&this.$router.push({name:"limiteSet"}),1==e.index&&this.$router.push({name:"planList"})}}},o={render:function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"planmanage commonRight"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":this.handelGo}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-duanxintongzhi"}),this._v("限报设置")]),this._v(" "),a("limiteRegistrationSet")],1),this._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-duanxinmobanguanli"}),this._v("考试计划")]),this._v(" "),a("plansListComponent")],1)],1)],1)},staticRenderFns:[]};var s=t("C7Lr")(r,o,!1,function(e){t("Im/A")},"data-v-7a33a3f9",null);a.default=s.exports},oWIm:function(e,a){},"pdl+":function(e,a,t){"use strict";t("2bvH");var n={props:["CurrentPages"],data:function(){return{inputVal:"",pickerTime:"",manageUnitId:"",examRoomId:"",unitsList:[],roomList:[],tableData:[],currentPage:1,total:null,totalPage:null,pageSize:null,tableData1:[]}},methods:{indexMethod:function(e){return e+1+this.pageSize*(this.currentPage-1)},getData:function(e){var a=this;this.$http.get("/api/plan/plan_list",{params:e}).then(function(e){if(a.tableData=[],200===e.status&&0===e.data.code){a.total=e.data.data.planPage.total,a.totalPage=e.data.data.planPage.totalPage,a.pageSize=e.data.data.planPage.pageSize,a.currentPage=e.data.data.planPage.page;var t=e.data.data;a.unitsList=t.unitsList,a.unitsList.unshift({unitName:"全部",id:0}),a.roomList=t.roomList,a.roomList.unshift({examRoomName:"全部",id:0}),a.tableData=t.planPage.rows,a.tableData.forEach(function(e,t){e.createdTime=a.getTimeStyle(e.createdTime).split(" ")[0],e.manageUnit=a.unitsList.filter(function(a){return a.id===e.manageUnit})[0].unitName,e.roomIdName=a.roomList.filter(function(a){return a.id===e.roomId})[0].examRoomName,e.openTime=e.signOpenDate.split(" ")[0]+" "+e.signOpenTime;var n=Number(Date.parse(e.openTime.replace(/-/g,"/"))),i=Number(new Date);e.status=!(n-i>=0)})}else console.log(e.data.msg)}).catch(function(e){console.log("数据异常")})},handleAddPlan:function(){this.$router.push({name:"addPlan"})},searchData:function(){var e=new URLSearchParams;e.append("provinceId",11e4),e.append("paramStr",this.inputVal),""!==this.manageUnitId?e.append("manageUnit",this.manageUnitId):e.append("manageUnit",0),""!==this.examRoomId?e.append("roomId",this.examRoomId):e.append("roomId",0),""!==this.pickerTime&&null!==this.pickerTime&&(e.append("begin",this.pickerTime[0]),e.append("end",this.pickerTime[1])),this.getData(e)},handleHistory:function(){alert("后期增加历史考试计划")},changePickerTime:function(e){var a=new URLSearchParams;a.append("provinceId",11e4),""!==this.pickerTime&&null!==this.pickerTime&&(a.append("begin",this.pickerTime[0]),a.append("end",this.pickerTime[1])),""!==this.inputVal?a.append("paramStr",this.inputVal):a.append("paramStr",""),""!==this.manageUnitId?a.append("manageUnit",this.manageUnitId):a.append("manageUnit",0),""!==this.examRoomId?a.append("roomId",this.examRoomId):a.append("roomId",0),this.getData(a)},changeManageUnit:function(e){this.manageUnitId=e;var a=new URLSearchParams;a.append("provinceId",11e4),a.append("manageUnit",e),""!==this.inputVal?a.append("paramStr",this.inputVal):a.append("paramStr",""),""!==this.examRoomId?a.append("roomId",this.examRoomId):a.append("roomId",0),""!==this.pickerTime&&null!==this.pickerTime&&(a.append("begin",this.pickerTime[0]),a.append("end",this.pickerTime[1])),this.getData(a)},changeExamRoom:function(e){this.examRoomId=e;var a=new URLSearchParams;a.append("roomId",e),a.append("provinceId",11e4),""!==this.inputVal?a.append("paramStr",this.inputVal):a.append("paramStr",""),""!==this.manageUnitId?a.append("manageUnit",this.manageUnitId):a.append("manageUnit",0),""!==this.pickerTime&&null!==this.pickerTime&&(a.append("begin",this.pickerTime[0]),a.append("end",this.pickerTime[1])),this.getData(a)},modifyData:function(e){console.log(e);var a=Number(Date.parse(e.openTime.replace(/-/g,"/"))),t=Number(new Date);console.log(a-t,111111),a-t<=0?(this.$message({message:"已经过了开放报名时间了,不能修改了",type:"warning"}),this.$router.go(0)):(this.$router.push({name:"editPlan"}),this.$store.dispatch("modifyDate",{currentId:e.id,storeRoomId:e.roomId}))},handleCurrentChange:function(e){var a=new URLSearchParams;a.append("provinceId",11e4),a.append("page",e),""!==this.inputVal?a.append("paramStr",this.inputVal):a.append("paramStr",""),""!==this.manageUnitId?a.append("manageUnit",this.manageUnitId):a.append("manageUnit",0),""!==this.examRoomId?a.append("roomId",this.examRoomId):a.append("roomId",0),""!==this.pickerTime&&null!==this.pickerTime&&(a.append("begin",this.pickerTime[0]),a.append("end",this.pickerTime[1])),this.getData(a)}},mounted:function(){var e=new URLSearchParams;e.append("provinceId",11e4),e.append("manageUnit",0),e.append("roomId",0),e.append("paramStr",""),this.getData(e)}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"planList"},[t("div",{staticClass:"top"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",round:""},on:{click:e.handleAddPlan}},[e._v("新增计划")]),e._v(" "),t("div",{staticClass:"search"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputVal,expression:"inputVal",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入考场编号或级别"},domProps:{value:e.inputVal},on:{input:function(a){a.target.composing||(e.inputVal=a.target.value.trim())},blur:function(a){return e.$forceUpdate()}}}),e._v(" "),t("el-button",{attrs:{circle:""},on:{click:e.searchData}},[e._v("搜索")])],1),e._v(" "),t("el-button",{staticClass:"historyBtn",attrs:{type:"primary",icon:"el-icon-time",round:""},on:{click:e.handleHistory}},[e._v("历史考试计划")])],1),e._v(" "),t("div",{staticClass:"top",attrs:{id:"searchPart"}},[t("div",{staticClass:"lfPart"},[t("el-date-picker",{attrs:{type:"daterange",format:"yyyy - MM - dd ","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changePickerTime},model:{value:e.pickerTime,callback:function(a){e.pickerTime=a},expression:"pickerTime"}}),e._v(" "),t("el-select",{attrs:{placeholder:"全部管理单位"},on:{change:e.changeManageUnit},model:{value:e.manageUnitId,callback:function(a){e.manageUnitId=a},expression:"manageUnitId"}},e._l(e.unitsList,function(e){return t("el-option",{key:e.id,attrs:{label:e.unitName,value:e.id}})}),1),e._v(" "),t("el-select",{attrs:{placeholder:"全部考场"},on:{change:e.changeExamRoom},model:{value:e.examRoomId,callback:function(a){e.examRoomId=a},expression:"examRoomId"}},e._l(e.roomList,function(e){return t("el-option",{key:e.id,attrs:{label:e.examRoomName,value:e.id}})}),1)],1),e._v(" "),t("p",[e._v("共有"),t("span",[e._v(e._s(e.total))]),e._v("/"),t("span",[e._v(e._s(e.total))]),e._v("条结果")])]),e._v(" "),t("div",{staticClass:"tabs-data",attrs:{id:"planListTbs"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{label:"序号",type:"index",index:e.indexMethod,width:"55"}}),e._v(" "),t("el-table-column",{attrs:{prop:"manageUnit",label:"管理单位",width:"195"}}),e._v(" "),t("el-table-column",{attrs:{prop:"roomIdName",label:"考场名称",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"考试日期",width:"105"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.examDate.split(" ")[0]))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"examTime",label:"考试时间",width:"85"}}),e._v(" "),t("el-table-column",{attrs:{prop:"timeStr",label:"时长",width:"70"}}),e._v(" "),t("el-table-column",{attrs:{label:"级别",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.levelStr.replace(/,/g,"/")))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"openTime",label:"开放报名时间",width:"160"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",width:"160"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createdUser",label:"作者",width:"115"}}),e._v(" "),t("el-table-column",{attrs:{label:"管理操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",icon:"iconfont icon-xiugai-",disabled:a.row.status},on:{click:function(t){return t.preventDefault(),e.modifyData(a.row)}}},[e._v("修改")])]}}])})],1),e._v(" "),t("el-pagination",{attrs:{background:"",total:e.total,layout:"prev, pager, next","current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var r=t("C7Lr")(n,i,!1,function(e){t("oWIm")},"data-v-189fbf25",null);a.a=r.exports}});
//# sourceMappingURL=8.0514654b1c27e8d7e0f2.js.map